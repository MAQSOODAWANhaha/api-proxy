# AI代理平台生产环境配置
# 支持IP模式（自签证书）和域名模式（公有域名证书）双重部署

# ================================
# 基础配置
# ================================
COMPOSE_PROJECT_NAME=api-proxy
CONFIG_FILE=config.prod.toml

# ================================
# TLS证书模式配置
# ================================
# TLS证书模式：
# - selfsigned: IP地址自签名证书模式（开发/内网环境）
# - auto: 域名自动证书模式（生产环境，Let's Encrypt）
# - manual: 手动证书模式（企业自有证书）
TLS_MODE=selfsigned

# ================================
# 域名配置（域名模式使用）
# ================================
# 公有域名（用于auto/manual模式）
DOMAIN=******.****
# Let's Encrypt证书申请邮箱（auto模式必需）
CERT_EMAIL=admin@******.work

# ================================
# IP地址配置（IP模式使用）
# ================================
# 本机IP地址（用于selfsigned模式）
# 留空则自动检测，检测失败时提示手动输入
LOCAL_IP=

# ================================
# 访问地址配置说明
# ================================
# IP模式 (TLS_MODE=selfsigned):
#   - https://${LOCAL_IP}        # 主要访问入口
#   - https://localhost          # 本地访问
#   - https://${LOCAL_IP}:8443   # 备用端口
#   - http://${LOCAL_IP}         # HTTP访问（开发模式）
#
# 域名模式 (TLS_MODE=auto/manual):
#   - https://${DOMAIN}          # 主域名访问
#   - https://${DOMAIN}:8443     # 备用端口

# ================================
# 日志配置
# ================================
RUST_LOG=info
RUST_BACKTRACE=1

# ================================
# 数据库配置
# ================================
DATABASE_URL=sqlite:///app/data/api-proxy.db

# ================================
# 安全配置
# ================================
JWT_SECRET=59cRk3Cp/+SpZ9LZxA3ypQh0kKnY48JB6tbJPRzcsw4=
API_KEY_SECRET=BjvhuJKr7K9xVkv/UTThV97ovabUC39LGw7VtIHu3Ck=

# ================================
# Redis配置
# ================================
REDIS_URL=redis://redis:6379

# ================================
# 前端配置
# ================================
# API基础URL（前端访问后端API的地址）
# IP模式下会动态设置为: https://${LOCAL_IP}/api
# 域名模式下使用: /api（相对路径，由代理转发）
VITE_API_BASE_URL=/api
VITE_WS_URL=/ws
VITE_APP_VERSION=1.0.0

# ================================
# 监控配置
# ================================
ENABLE_METRICS=true
METRICS_PORT=9091

# ================================
# 版本标识
# ================================
VERSION=1.0.0
BUILD_TIME=2024-01-01T00:00:00Z
